const Jsoninfo= [
    {
        "grupos": [
            {
                "ruta": "nodeJS",
                "modulos": {
                    "fundamentos de programacion": [
                        "introduccion a la algoritmia",
                        "PSeint",
                        "Python"
                    ],
                    "programacion web": [
                        "HTML",
                        "CSS",
                        "booststrap"
                    ],
                    "programacion formal": "C#",
                    "bases de datos": [
                        "MongoDB",
                        "Mysql"
                    ],
                    "backend": [
                        "nodeJS",
                        "Spring Boot"
                    ]
                },
                "nombres": "t1",
                "fecha de inicio": "20-01-2024",
                "fecha de finalizacion": "20-11-2024",
                "salon de entrenamiento": "aula1",
                "grupo": [
                    {
                        "id": "1",
                        "nombre": "yurley",
                        "apellido": "botello",
                        "edad": "17",
                        "direccion": "10-call 3",
                        "acudiente": "ana",
                        "telefono": {
                            "celular": 321467891,
                            "fijo": 6782
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {}
                    },
                    {
                        "id": "2",
                        "nombre": "luis",
                        "apellido": "caicedo",
                        "edad": "19",
                        "direccion": "13-call 6",
                        "acudiente": "luis",
                        "telefono": {
                            "celular": 3124567894,
                            "fijo": 889063
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {}
                    }
                ]
            },
            {
                "ruta": "java",
                "modulos": {
                    "fundamentos de programacion": [
                        "introduccion a la algoritmia",
                        "PSeint",
                        "Python"
                    ],
                    "programacion web": [
                        "HTML",
                        "CSS",
                        "booststrap"
                    ],
                    "programacion formal": "java",
                    "bases de datos": [
                        "PostGresql",
                        "Mysql"
                    ],
                    "backend": [
                        "Spring Boot",
                        "Expres"
                    ]
                },
                "nombres": "t2",
                "fecha de inicio": "10-02-2024",
                "fecha de finalizacion": "10-11-2024",
                "salon de entrenamiento": "aula2",
                "grupo": [
                    {
                        "id": "3",
                        "nombre": "pablo",
                        "apellido": "contreras",
                        "edad": "23",
                        "direccion": "10-call4",
                        "acudiente": "pedro",
                        "telefono": {
                            "celular": 312467832,
                            "fijo": 6778
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {}
                    },
                    {
                        "id": "4",
                        "nombre": "maria",
                        "apellido": "sandoval",
                        "edad": "2",
                        "direccion": "11-call6",
                        "acudiente": "maria",
                        "telefono": {
                            "celular": 316783426,
                            "fijo": 90876
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {}
                    },
                    {
                        "id": "234",
                        "nombre": "ZULLY",
                        "apellido": "ortiz",
                        "edad": "18",
                        "direccion": "Diocesano",
                        "acudiente": "Fabiola ",
                        "telefono": {
                            "celular": 31264846,
                            "fijo": 12364
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {}
                    }
                ]
            },
            {
                "ruta": "NetCore",
                "modulos": {
                    "fundamentos de programacion": [
                        "introduccion a la algoritmia",
                        "PSeint",
                        "Python"
                    ],
                    "programacion web": [
                        "HTML",
                        "CSS",
                        "booststrap"
                    ],
                    "programacion formal": "JavaScript",
                    "bases de datos": [
                        "PostGresql",
                        "Mysql"
                    ],
                    "backend": [
                        "NetCore",
                        "Expres"
                    ]
                },
                "nombres": "t3",
                "fecha de inicio": "01-01-2024",
                "fecha de finalizacion": "14-12-2024",
                "salon de entrenamiento": "aula3",
                "grupo": [
                    {
                        "id": "5",
                        "nombre": "camilo",
                        "apellido": "suarez",
                        "edad": "18",
                        "direccion": "14-call7",
                        "acudiente": "camilo",
                        "telefono": {
                            "celular": 3214890,
                            "fijo": 4321
                        },
                        "estado": "cursando",
                        "riesgo": "bajo",
                        "modulos": {
                            "modulo1": "aprobado",
                            "modulo2": "aprobado"
                        }
                    },
                    {
                        "id": "6",
                        "nombre": "sofia",
                        "apellido": "suarez",
                        "edad": "19",
                        "direccion": "1-call6",
                        "acudiente": "sofia",
                        "telefono": {
                            "celular": 322478999,
                            "fijo": 67843
                        },
                        "estado": "cursando",
                        "riesgo": "alto",
                        "modulos": {
                            "modulo4": "aprobado",
                            "modulo3": "aprobado",
                            "modulo2": "desaprobado",
                            "modulo5": "desaprobado",
                            "modulo1": "desaprobado"
                        }
                    },
                    {
                        "id": "78",
                        "nombre": "luz",
                        "apellido": "perez",
                        "edad": "18",
                        "direccion": "20",
                        "acudiente": "luz",
                        "telefono": {
                            "celular": 1244354,
                            "fijo": 765752
                        },
                        "estado": "cursando",
                        "riesgo": "",
                        "modulos": {}
                    }
                ]
            }
        ],
        "trainers": [
            {
                "id": 1,
                "nombre": "pedro",
                "apellido": "caceres",
                "Telefono": 3212231223,
                "user": "pedro",
                "contrase\u00f1a": "p123",
                "edad": "20",
                "ruta": []
            },
            {
                "id": 2,
                "nombre": "michael",
                "apellido": " rodriguez",
                "Telefono": 3212256733,
                "user": "michael",
                "contrase\u00f1a": "m123",
                "edad": "27",
                "ruta": []
            },
            {
                "id": 3,
                "nombre": "orbin",
                "apellido": "contreras",
                "Telefono": 3212245623,
                "user": "orbin",
                "contrase\u00f1a": "o123",
                "edad": "30",
                "ruta": []
            }
        ],
        "coordinador": [
            {
                "id": 123,
                "nombre": "stiven",
                "apellido": " carvajal",
                "edad": "23",
                "sede": "tibu"
            }
        ],
        "ingreso": [
            {
                "id": "11",
                "nombre": "jesus",
                "apellido": "bustamante",
                "edad": "17",
                "direccion": "23-cal13",
                "acudiente": "ingrid",
                "telefono": {
                    "celular": 324167823,
                    "fijo": 33462
                },
                "estado": "progreso de ingreso",
                "riesgo": "",
                "modulos": {}
            }
        ],
        "Registro_de_Entrada": [
            {
                "id": "234",
                "fecha_entrada": "2024-08-15 16:50:39",
                "actividades_realizadas": "una tarea",
                "estado": "Inactiva"
            },
            {
                "id": "1",
                "fecha_entrada": "2024-08-15 17:05:22",
                "actividades_realizadas": "nada",
                "estado": "Activa"
            }
        ]
    }
]



console.log(Jsoninfo)
//menu principal
function menu(){
    console.log("");
    console.log(":::::::::BIENBENIDO A NUESTRA PLATAFORMA::::::::");
    console.log("1 MODULO DE COORDINACION ACADEMICA");
    console.log("2 MODULO DE TRAINER");
    console.log("3 MODULO DE REPORTE");
    console.log("4 REGISTRAR ENTRADA");
    console.log("5 SALIR");
}
menu()


function menucoordinador(){
    console.log("")
    console.log("::::::::::MENÚ::::::::::");
    console.log("1 listar estudiantes");
    console.log("2 ingresar nuevos campers");
    console.log("3 modulo de matriculas");
    console.log("4 crear rutas academicas con los modulos");
    console.log("5 asignar rutas de entrenamiento a los traniers");
    console.log("6 notas de modulos");
    console.log("7 consultar campers con riesgo alto");
    console.log("8 actualizar datos de campers");
    console.log("9 volver al menu principal");
    console.log(":::::::::::::::::::::::::");
}
hola=true
while(hola==true){
    let opc=prompt("elige una opcion de las que se muestranen el menú: ")

    if(opc.toLowerCase()==1){
        esoo=true
        while(esoo==true){
           
            console.log("")
            console.log("MODULO DE COORDINACION ACADEMICA")
            menucoordinador()
            let opci=prompt("elije la opción a la que deseas ")
            if(opci.toLowerCase()==1){
                console.clear() 
                console.log("ESTUDIANTES REGISTRADOS");
                console.log("")
                for (const x of Jsoninfo[0]["grupos"]){
                    for(const i of  x["grupo"]){
                        console.log("==================")
                        console.log("Id: ", i["id"]);
                        console.log("Nombre: ", i["nombre"]);
                        console.log("Apellido: ", i["apellido"]);
                        console.log("Edad: ", i["edad"]);
                        console.log("==================")

                    }
            
                }
                esoo=true
            }   
            if(opci.toLowerCase()==2){
                console.log("AGREGAR CAMPERS")
                console.log("")
                let id=prompt("ingrese la id ")
                let nombre=prompt("ingrese el nombre")
                let apellido=prompt("ingrese el apellido ")
                let edad=prompt("ingrese la edad")
                let direccion=prompt("ingrese la direccion ")
                let acudiente=prompt("ingrese el nombre del acudiente ")
                let celular=prompt("ingrese el numero de celular")
                let fijo=prompt("ingrese el numero de telefono fijo ")
            
                
                Jsoninfo[0]["ingreso"].push([{ "id": id , "nombre":nombre, "apellido":apellido,"edad":edad, "direccion":direccion, "acudiente":acudiente, "telefono":{"celular":celular,"fijo":fijo},"estado":"progreso de ingreso","riesgo":"","modulos":{}}]);
                esoo=true
            }
            if(opci.toLowerCase()==3){
                console.clear()
                console.log("======MATRICULAS======");
                console.log("Estos son los estudiantes que se encuentran en estado de ingreso")
                console.log("")
                
                for (const i of Jsoninfo[0]["ingreso"]){
                    console.log("==================")
                    console.log("Id: ", i["id"]);
                    console.log("Nombre: ", i["nombre"]);
                    console.log("Apellido: ", i["apellido"]);
                    console.log("Edad: ", i["edad"]);
                    console.log("Estado: ", i["estado"]);
                    console.log("==================")
            
                }
                let idestudiante=prompt("Ingrese la id del estudiante al que desear añadirle notas:")
                for (const a of Jsoninfo[0]["ingreso"]){
                    if(a["id"]==idestudiante){
                        archivo=a
                        let nota1=prompt("ingresa la nota de la prueba teorica: ")
                        let nota2=prompt("ingrese la nota de la prueba practica: ")
                        nota1=nota1*0.4
                        nota2=nota2*0.6
                        resul=nota1+nota2
                        console.log(resul)
                        if(resul>=60){
                            console.log( "Este estudiante aprobo")
                            a["estado"]="cursando"
                            console.log("")
                            console.log("estas son las rutas que estan disponibles")
                            grups=[]
                            for(l of Jsoninfo[0]["grupos"]){
                                if(l["grupo"].length<33){
                                    console.log("--------")
                                    console.log(l["nombres"])
                                    console.log(l["ruta"])
                                    grups.push(l["nombres"])
                                }
                            }
                            let pregunta2=prompt("ingresa el nombre del grupo que tiene la ruta que deseas:")
                            for(const d of Jsoninfo[0]["grupos"]){
                                if(pregunta2==d["nombres"]){
                                    d["grupo"].push(archivo)
                                    console.log("se han aplicado los cambios")
                                    esoo=true
                                    break
                                }  
                                if(pregunta2!=d["nombres"]){
                                    console.log("este grupo no existe (o escribe bien el nombre)")
                                }
                            }
                        }
                        else{
                            console.log("Este estudiante no aprobo")
                        }  
                            
                    }   
                }
                
                esoo=true

            }
            if(opci.toLowerCase()==4){
                console.clear()
                console.log(":::::::::: CREAR RUTAS ACADEMICAS CON LOS MODULOS ::::::::::::::");
                console.log("")
                yo=true
                while (yo==true){
                    let rutas=[]
                    xd=0
                    for( const i of  Jsoninfo[0]["grupos"]){
                        for( const x in i["ruta"].length){
                            xd=x
                        }
                    rutas.push(i["ruta"])
                    if(xd<12){
                        ace=true
                        rutaa=[]
                        while (ace==true){
                            let ruta=prompt("ingresa el nombre de la nueva ruta")
                            if (ruta!=rutas){
                                rutaa.push(ruta)
                                ace=false

                            } 
                            else{
                                console.log("este nombre no está disponible ingresa uno valido")
                            }     
                        }
                        for( let i = 0; i < rutas.length; i++){
                            rutas.pop(i)
                        }
                        uno=true
                        while (uno==true){
                            console.log("escoje una opcion para programacin formal")
                            modulo1=parseInt(prompt("1.Java  2.JavaScript  3.C#)\n"))
                            if (modulo1==1){
                                num1="Java"
                                uno=false
                            }
                                
                            if (modulo1==2){ 
                                num1="JavaScrip"
                                uno=false
                            }
                                
                            if (modulo1==3){
                                num1="C#"
                                uno=false
                            }
                        } 
                        dos=true
                        while (dos==true){
                            console.log("escoje el modulo principal para bases de datos")
                            modulo21=parseInt(prompt("1.Mysql  2.MongoDB  3.PostGresql)"))
                            if (modulo21==1){
                                num2="Mysql"
                                dos=false
                            }
                            if (modulo21==2){
                                num2="MongoDB"
                                dos=false
                            }
                            if (modulo21==3){
                                num2="PostGresql"
                                dos=false
                            }
                        }
                        tres=true
                        while (tres==true){
                            console.log("escoje el modulo secundario para bases de datos")
                        
                            modulo22=parseInt(prompt("1.Mysql  2.MongoDB  3.PostGresql"))
                            if (modulo22==1){
                                num3="Mysql"
                                tres=false
                            }
                            if (modulo22==2){
                                num3="MongoDB"
                                tres=false
                            }
                            if (modulo22==3){
                                num3="PostGresql"
                                tres=false
                            }
                        }
                        cuatro=true
                        while (cuatro==true){
                            console.log("escoje el modulo principal para BACKEND")
                            modulo31=parseInt(prompt("1.NetCore  2.Spring Boot  3.NodeJS  4.Expres\n"))
                            if (modulo31==1){
                                num4="NetCore"
                                cuatro=false
                            }
                            if (modulo31==2){
                                num4="Spring Boot"
                                cuatro=false
                            }
                            if (modulo31==3){
                                num4="NodeJS"
                                cuatro=false
                            }
                            if (modulo31==4){
                                num4="Expres"
                                cuatro=false
                            }
                        }
                        cinco=true
                        while (cinco==true){
                            console.log("escoje el modulo secundario para BACKEND")
                            modulo32=parseInt(prompt("1.NetCore  2.Spring Boot  3.NodeJS  4.Expres"))
                            if (modulo32==1){
                                num5="NetCore"
                                cinco=false
                            }
                            if (modulo32==2){
                                num5="Spring Boot"
                                cinco=false
                            }
                            if (modulo32==3){
                                num5="NodeJS"
                                cinco=false
                            }
                            if (modulo32==4){
                                num5="Expres"
                                cinco=false
                            }
                        }
                        let listasalones=[]
                        for( const p in Jsoninfo[0]["grupos"]){
                            listasalones.push(p["salon de entrenamiento"])
                        } 
                        let salon1=0
                        let salon2=0
                        let salon3=0
                        for( let h = 0; h < listasalones.length; h++){
                            if (listasalones[h]=="aula1"){ 
                                salon1=salon1+1
                            } 
                            if (listasalones[h]=="aula2"){
                                salon2=salon2+1
                            } 
                            if (listasalones[h]=="aula3"){
                                salon3=salon3+1
                            }
                        }
                        listaaula=[]
                        if (salon1<4){
                            console.log("1. aula1")
                            listaaula.push("aula1")
                        }
                        if (salon2<49){
                            console.log("2. aula2")
                            listaaula.push("aula2")
                        }   
                        if (salon3<4){
                            console.log("3. aula3")
                            listaaula.push("aula3")
                        }
                        rutaas=rutaa
                        yuju=true
                        while (yuju==true){
                            let escoje=parseInt(prompt("escoje un salon de entranamiento de los que acabo de mostrar\n"))
                            for(let h = 1; h < listasalones.length; h++){
                                if (h==escoje){
                                    let fechaI=prompt("ingresa la fecha de INICIO DD-MM-AA\n")
                                    let fechaF=prompt("ingresa la fecha de FINALIZACIÓN DD-MM-AA\n")
                                    let nuevonombre=prompt("ingresa el nombre del nuevo grupo\n")
                                    Jsoninfo[0]["grupos"].push({"ruta":rutaas, "modulos":{"fundamentos de programacion": ["introduccion a la algoritmia", "PSeint", "Python"],
                                                                                        "programacion web": ["HTML", "CSS", "booststrap"],
                                                                                        "programacion formal":num1,
                                                                                        "bases de datos":[num2,num3],
                                                                                        "backend":[num4,num5]}, "nombres":nuevonombre,"fecha de inicio":fechaI,"fecha de finalizacion":fechaF,"salon de entrenamiento":escoje, "grupo":[]})
                                    let cambio=prompt("SE HA CREADO LA RUTA CON EXITO \n crear otra ruta: (si) volver al menu: preciona enter")
                                    if (cambio!="si"){
                                        yo=false
                                    }
                                    else{
                                        console.log("ya se alcanzó el maximo de rutas que se pueden crear")
                                        yo=false
                                    }
                                
                    
                }
                                else{
                                    console.log("esta aula no esta disponible o lo escribiste mal")
                                }
                            }   menucoordinador() 
                                yuju=false
                                yo=false 
                                esoo=true
                            
                           
                        }
                       
                         
                    }
                    
                }
            }   
        }    
            if(opci.toLowerCase()==5){
                console.clear()
                console.log("::::::ASIGNACIÖN DE RUTA:::::::::")
                console.log("")
                ole=true
                while (ole==true){
                    for (i in Jsoninfo[0]["trainers"]){
                        if (i["ruta"].length<4){
                            console.log("")
                            console.log("--------------------------------")
                            console.log("id:  ", i["id"])
                            console.log("nombre: ", i["nombre"])
                            console.log("apellido", i["apellido"])
                            console.log("--------------------------------")
                            console.log("")
                        }
                        
                    }
                       
                    const miau=true
                    while (miau==true){
                        cont=0 
                        let seleccion=parseInt(prompt("ingresa el id del trainer al que le quieres asignar una ruta\n"))
                        for ( let i in Jsoninfo[0]["trainers"]){
                            if (i["ruta"].length<4 && seleccion==i["id"]){
                                cont=1
                                miau=false
                            }
                        }      
                        if (cont==0){
                            console.log("ingresa un id de los que muestran")
                        }
                    }
                        
                    if (cont==1){
                        listarutas=[]
                        for( let a of Jsoninfo[0]["grupos"]){
                            rutacont=0
                            for( i in Jsoninfo[0]["trainers"]){
                                for(z of i["ruta"].length){
                                    if (i["ruta"][z]==a["ruta"]){
                                        rutacont=1 
                                    }
                                }
                            }         
                            if (rutacont==0){
                                console.log("ruta: ", a["ruta"])
                                listarutas.push(a["ruta"])
                            }
                                
                        }
                    } 
                        if (listarutas.length>0){
                            for(x in Jsoninfo[0]["trainers"]){
                                if (x["id"]==seleccion){
                                    piece=true
                                    while(piece==true){
                                        son=0
                                        qwerty=prompt("escoje una ruta:  ")
                                        for( m in listarutas.length){
                                            if (listarutas[m]==qwerty){
                                                son=1
                                                piece=false
                                            }
                                                
                                            if (son==0){
                                                console.log("esta ruta no esta disponible")
                                                console.log("ingresa una ruta de las que se mostraron")
                                            }
                                                
                                        }
                                           
                                    
                                    for( l in listarutas.length)
                                        listarutas.pop(l) 
                                    }
                                    x["ruta"].push(qwerty)
                                        console.log("ruta agregada con exito")
                                        let pregun=prompt("quieres hacer otro cambio (si)\n si no quieres preciona enter\n")
                                        if(pregun!="si"){
                                            ole=False
                                        }
                                        
                                }
                                    
                            }
                        }
                            
                                
                }
                    
                menucoordinador()
            };
            if(opci.toLowerCase()==6){
                console.clear() 
                console.log("")
                console.log("6 notas de modulos");
            } 
            if(opci.toLowerCase()==7){
                console.clear()
                console.log("")
                console.log("7 consultar campers con riesgo alto");
            } 
            if(opci.toLowerCase()==8){
                console.clear()
                console.log("")
                console.log("8 actualizar datos de campers");
            } 
            if(opci.toLowerCase()==9){
                console.clear()
                console.log("")
                console.log("Volviendo al menu principal...")
                menu()
            }
        }
        
    }

    if(opc.toLowerCase()==2){
        console.clear()
        console.log("")
        console.log("MODULO DE TRAINER")
    }
    if(opc.toLowerCase()==3){
        console.clear()
        console.log("")
        console.log("MODULO DE REPORTE")
    }
    if(opc.toLowerCase()==4){
        console.clear()
        console.log("")
        console.log("MODULO DE ENTRADA")
    }
    if(opc.toLowerCase()==5){
        console.clear()
        console.log("")
        console.log("HAS ABANDONADO EL PROGRAMA ADIOSS...")
    }

}
